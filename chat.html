<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="icon" href="./favicon.ico">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="description" content="Charles Capdeville Portfolio Unity Associate C# and HLSL">
        <link href="main.css" rel="stylesheet">
        <title>API Conan - Totchinuko</title>
        <script type="text/javascript" src="index.js"></script>
    </head>
    <body>
        <!-- HEADER -->
        <div id="header">
            <div class="content">
                <h1>Tot ! Conan API</h1>
            </div>
        </div>
        <nav id="menu">
            <a id="mobilemenu" class="button"><img src="img/menu.png" /></a>
            <div id="mainmenu">
                <a href="index.html" class="button"><img src="img/blue.png" /><span>Home</span></a>
                <a href="chat.html" class="button"><img src="img/green.png" /><span>Tot ! Chat</span></a>
                <a href="custom.html" class="button"><img src="img/yellow.png" /><span>Tot ! Custom</span></a>
            </div>
        </nav>
        <!-- /HEADER -->

        <div id="main">
            <h2>Tot ! Chat API</h2>
            <div class="block">
                <h3>API Download</h3>
                <div class="block">
                    <span class="smalltitle info">Note about Sudo</span>
                    <p>Since Tot ! Chat API is bundled with Sudo, you might aswell download sudo API directly, since Tot ! Chat require Sudo. Chat API is located in ModsShared/SudoExile/TotChat</p>
                    <p>You'll find the Sudo Discord and its documentation <a href="https://discord.gg/2TuYNCCZJ8">here</a>.</p>
                </div>
                <div class="block">
                    <span class="smalltitle warning">Important instructions</span>
                    <p>1- Extract this into <span class="path">ConanExilesDevKit\Games\ConanSandbox\Content\ModsShared\</span></p>
                    <p><span class="strong">2- Do not modify any of the files in there</span></p>
                    <p><span class="strong">3- Do not put these files in your mod content folder and do not select them in the modfile list</span></p>
                    <p>If you do not follow those guidelines, whenever we update the API files, your mod is going to conflict whenever someone place it lower than Sudo in the modlist.</p>
                </div>
                <div class="block">
                    <span class="smalltitle warning">Common pitfall since 3.1</span>
                    <p><img src="img/screenshot/UE4Editor_1675034735.png" class="screenshot" /> Since a recent update of the Devkit, it is easy to pak by mistake API files in your mod. Please do check your file list and uncheck API files if you do not intend to pak them. Side effect of paking those file range from reintroducing bug if your mod is lower in the modlist, crash and other issues.</p>
                    <br class="clear"/>
                </div>
                <p><a href="https://cdn.discordapp.com/attachments/1054782906251366401/1054782993182490685/TotChat1.1.13.zip" class="button green download"><img src="img/download.png" />Download <span class="version">1.1.3</span></a></p>
            </div>
            <div class="block">
                <h3>Internal Data Tables</h3>
                <div class="block">
                    <span class="ueClass table">Tot_DT_ChatCommandTable</span>
                    <p>This is the list of commands of Tot ! Chat as they are in its own datatable. One could use that to override some of them.</p>
                    <a href="https://cdn.discordapp.com/attachments/1054782906251366401/1069572429694906408/TotChatCommandTable.json" class="button green"><img src="img/download.png" />Download</a>
                </div>
            </div>
            <div class="block">
                <h3>Main Interface Components</h3>
                <div class="block">
                    <span class="ueClass interface">Tot_I_ChatCompanion</span>
                    <span class="path">ModsShared/SudoExile/TotChat/Tot_I_ChatCompanion</span>
                    <p>This is a component located on an actor that need to be able to chat. For players, that would be located on BasePlayerChar. It is responsible to connect to the ChatSystem, handle the actor languages, send and received message and transmit them to the UI or from the UI. Since Sudo offer a way to change the chat, it is important for you to ask Sudo What is the current chat companion tag in order to get the right one. A few helper function are available in the TotChat API folder function library. </p>
                </div>
                <div class="block">
                    <span class="ueClass interface">Tot_I_ChatSystem</span>
                    <span class="path">ModsShared/SudoExile/TotChat/Tot_I_ChatSystem</span>
                    <p>This is the centralized component. It received all the messages, and redirect them to the appropriate channels that will redirect messages to the players that should receive them. Since Sudo offer a way to change the chat, it is important for you to ask Sudo What is the current chat system in order to receive the proper one. A few helper function are available in the TotChat API folder function library. </p>
                </div>
                <div class="block">
                    <span class="ueClass interface">Tot_I_ChatSystemListener</span>
                    <span class="path">ModsShared/SudoExile/TotChat/Tot_I_ChatSystemListener</span>
                    <p>Implement to the objects that should receive events from the Chat System. Implement the interface, then register your object to the chat system you want to listen event from, and that's it. Don't forget to actually unregister when your actor is about to get destroyed.</p>
                </div>
                <div class="block">
                    <span class="ueClass interface">Tot_I_ChatCompanionListener</span>
                    <span class="path">ModsShared/SudoExile/TotChat/Tot_I_ChatCompanionListener</span>
                    <p>Implement to the objects that should receive events from the Chat Companion. Implement the interface, then register your object to the chat companion you want to listen event from, and that's it. Don't forget to actually unregister when your actor is about to get destroyed.</p>
                </div>
                <div class="block">
                    <span class="ueClass">Tot_FL_ChatHook</span>
                    <span class="path">ModsShared/SudoExile/TotChat/Tot_FL_ChatHooks</span>
                    <p>This is a helper library, containing a few functions that will simplify the use of the API. There content could also help you understand some of the part of the API as examples.</p>
                </div>
                <div class="block">
                    <span class="ueClass struct">Tot_S_ChatMessage</span>
                    <span class="path">ModsShared/SudoExile/TotChat/Types/Tot_S_ChatMessage</span>
                    <p><span class="ueVar int">EmitterUID</span> Unique ID of the message emitter. If this does not correspond to a chat companion UID, the message will be refused. 1.0.0 and up, negative UID will correspond to a Headless message and will skip all the checks. This can be used to send notifications or playerless messages.</p>
                    <p><span class="ueVar string">EmitterName</span> Simply the name of the Emitter. A message without an EmitterName is the equivalent of using the NoName tag, but providing an emitter name and using the NoName tag `should' be the prefered way of doing it as Tot ! Chat can display the name in metadata.</p>
                    <p><span class="ueVar int">ChannelID</span> ID of the channel to send the message to. If you send the message through ChatCompanion.SendMessage, ChatCompanion.SendLowLevelMessage, or ChatSystem.SendMessage, this need to be a valid channel ID or the message will be disgarded. If you send the message directly through ChatCompanion.ReceiveMessage, a channel ID of zero will automaticly spawn the message in the currently opened channel.</p>
                    <p><span class="ueVar name">Tags[]</span> Message tags that define special behaviors for the message. Tags can be anything. Multiple source define some internal Tags. First, the InternalTag table, that define a bunch of tags with special formating. Those are used to color messages or bits of messages. You can inject your own tags in this table to add your own color scheme while allowing players to customize it. Second, some system tags are used all across Tot ! Chat to handle special behavior, see the message about tags above. Tags may also include Distance/Range.</p>
                    <p><span class="ueVar name">Language</span> Language use in the message. This will be compared with the language list of the receiving player for scrambling. Leave it at none to have a universaly understood message.</p>
                    <p><span class="ueVar string">Message</span> The message itself. Nothing more to it.</p>
                    <p><span class="ueVar float">Distance</span> French shenanigans, this is in fact the range in centimeters. This is only used by the Local Channel and can be left at zero if you do not intend to send the message through a local channel.</p>
                    <p><span class="ueVar int">TargetUID</span> This UID is only used by the UI to differenciate Linked channel from Owner Channel. This can be left at zero in Tot ! Chat 1.0.0 and up, as the ChatCompanion will take care of that.</p>
                </div>
                <div class="block">
                    <span class="ueClass struct">Tot_S_ChatChannel</span>
                    <span class="path">ModsShared/SudoExile/TotChat/Types/Tot_S_ChatChannel</span>
                    <p><span class="ueVar int">ChannelID</span> A unique number assigned when creating a channel. The unique ID generator will never use a previously used ID.</p>
                    <p><span class="ueVar string">Name</span> Name of the channel. On a side note, private channels between two player do not have a name as it is dynamicly changind with the name of the other player.</p>
                    <p><span class="ueVar string">Password</span> Password of the channel. For private channel, this field is used to store both player UID separated by an underscore.</p>
                    <p><span class="ueVar name">Type</span> Type of channel. This can technicly be anything, but their is a few preset one that will change the icon, color and code of the channel: Global, Local, Clan, Private. Any other name will fall to the Default channel type. "Custom" is a type used for channel created with the command "/channel create", but is a default channel otherwise.<br/>
                    Please note that creating private channel is technically not possible with the API. The code for those is not exposed. </p>
                    <p><span class="ueVar boolean">UseLanguages</span> This is more broadly the IRP flag. When true, features like language, ranges, emotes are turned on for the channel. I did not rename it for backward compatibility.</p>
                    <p><span class="ueVar boolean">Notifications</span> Does the channel display connections and disconnections from the channel.</p>
                    <p><span class="ueVar int">OwnerUID</span> This is a tricky part. On server side this is used to ID the creator of the channel. On Client its a bit more complicated, it is used to know if a channel is from your character point of view, or if it is a link channel.</p>
                </div>
            </div>
            <div class="block">
                <h3>Message Tags</h3>
                <p>These following tags can be used in the <span class="ueVar struct">Tot_S_ChatMessage</span> struct in the <span class="ueVar name">Type</span> field to add various effect on your messages.</p>
                <p><span class="ueVar name">No_Bubble</span> Avoid a message from being displayed in a bubble</p>
                <p><span class="ueVar name">NoName</span> Remove the header part of the message containing the name of the character. Like an emote for example.</p>
                <p><span class="ueVar name">CC#FFFFFFFF</span> Any tag starting with CC# will be parsed as a custom color for the character name with the 8 hexadecimal character following the #</p>
                <p><span class="ueVar name">CM#FFFFFFFF</span> Any tag starting with CM# will be parsed as a custom color for the message content with the 8 hexadecimal character following the #</p>
                <p><span class="ueVar name">Notification</span> Make a message a notification, using a specific color defined by the user or the default chat table</p>
                <p><span class="ueVar name">Warning</span> Make a message a warning, using a specific color defined by the user or the default chat table</p>
                <p><span class="ueVar name">Alert</span> Make a message a alert, using a specific color defined by the user or the default chat table</p>
                <p><span class="ueVar name">AutoSwitch</span> When receiving a message with the AutoSwitch tag, the chat window will automatically switch to the channel that received the message.</p>
                <p><span class="ueVar name">Visual</span> This is used by Tot ! Admin. Any message received on client that contain that tag will pop a notification window with the content of your message. Does not support formating.</p>
            </div>
        </div>

        <!-- SPACER -->
        <div style="height: 200px"></div>
        <!-- /SPACER -->
    </body>
</html>